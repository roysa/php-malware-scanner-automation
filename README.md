# PHP malware scanner automation app

A wrapper to periodically run scr34m/php-malware-scanner for PHP/WordPress malware scan and report found malware by email. Based on [scr34m/php-malware-scanner](https://github.com/scr34m/php-malware-scanner) and [Lumen framework](https://lumen.laravel.com/docs/10.x).

## Installation

#### Prerequisites

* PHP => 8.1
* Composer

### Installation using git on Linux-based PHP server

Clone the repository:

`composer create-project --prefer-dist=roysa/php-malware-scanner-automation

Run config creation command in interactive mode:

`php artisan config:create`

Test email sending works:

`php artisan config:send-test-email`

Add a scanner job to cron. Example running every 6 hours:

`* /6 * * * /usr/bin/env php /path/to/artisan scan-and-report-all`

Use `php artisan config:show-artisan-command` to quickly get the path of executable

## Manual Configuration

Lists of direcories to scan, excluded files, and email adresses are located in scanner-config directory as one-per-line test files: scanner-config/directories.txt, scanner-config/excludes.txt, scanner-config/report-emails.txt.

Email sender configuration is following Laravel configuration. See .env file variables, the config/mail.php file and [Laravel mail doc](https://laravel.com/docs/5.5/mail#driver-prerequisites) for more information.

## Updates

run `composer update scr34m/php-malware-scanner`

## Documentation

Documentation for PHP Malware Scanner can be found on [GitHub PHP Malware Scanner readme](https://github.com/scr34m/php-malware-scanner)

Documentation for the Lumen framework can be found on the [Lumen website](https://lumen.laravel.com/docs).

## License

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
